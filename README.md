# 개인과제 - 콘솔 RPG 게임

Flutter 앱개발반에서 진행한 두 번째 개인과제 프로젝트입니다. dart console application을 이용해 사용자의 입력을 받아 진행하는 턴제 텍스트 RPG 게임을 구현했습니다. 

## 사용 언어:

**Tech used:** Dart

다트 기본문법을 응용한 프로그램입니다. Game, Character, Monster 클래스 간의 역할을 정확히 구분하고 각각의 클래스가 가져야 하는 기능을 메서드로 기능하여 코드 재사용성을 높이는 데에 집중했습니다.

## 콘솔 실행 예시
<img src = "https://img1.daumcdn.net/thumb/R1280x0/?scode=mtistory2&fname=https%3A%2F%2Fblog.kakaocdn.net%2Fdn%2FdUWvmR%2FbtsMQn2FTs4%2Ft1ix4GdiKUJGt4POKUYnok%2Fimg.png">

## 게임 기본 플로우
 - `캐릭터`와 `몬스터`는 번갈아서 자신의 턴을 가집니다.
 - `캐릭터(유저)`는 자신의 턴에 키보드 입력으로 액션을 선택할 수 있습니다.
 - `몬스터`는 턴마다 `캐릭터`를 공격합니다.
 - `몬스터`가 처치되면 `몬스터 리스트`에 남은 몬스터 중 하나를 랜덤으로 불러와 다시 전투합니다.
 - `몬스터 리스트`의 `몬스터`를 모두 처치하면 `캐릭터`가 승리합니다.
 - `캐릭터`가 사망하거나, 게임 진행을 중단하면 `캐릭터`가 패배합니다.
  
## 클래스별 역할

| [Game] | [Character] | [Monster] |
| --- | --- | --- |
| - 파일에서 캐릭터, 몬스터 정보 임포트<br>- 전체 게임 플로우 메서드<br>- 개별 전투 플로우 메서드<br>- 랜덤 몬스터 객체 선정<br>- 결과 파일 저장 | - 캐릭터 객체 변수 지정<br>- 캐릭터 이름 입력 <br>- 캐릭터 턴 플로우 메서드<br>- 캐릭터 액션 메서드<br>- 유저 입력 확인 메서드 | - 몬스터 객체 변수 지정<br>- 몬스터 액션 메서드 |

> `Game`은 게임 내부에서 사용할 객체, 변수를 선언하고 게임 플로우를 담당하는 메서드를 가집니다.
> 

> `Character`는 캐릭터의 변수를 선언하고 캐릭터의 행동(액션)을 결정하고 실행하는 메서드를 가집니다.
>

> `Monster`는 몬스터의 변수를 선언하고 몬스터의 액션을 실행하는 메서드를 가집니다.
>


## 구현 범위:

### 필수기능 1~3
- [X] 파일로부터 데이터 읽어오기 기능
- [X] 사용자로부터 캐릭터 이름 입력받기 기능
- [X] 게임 종료 후 결과를 파일에 저장하는 기능

### 도전기능 1~3
- [X] 캐릭터의 체력 증가 기능 추가
- [X] 전투 시 캐릭터의 아이템 사용 기능 추가
- [X] 몬스터의 방어력 증가 기능 추가

### 추가기능 3가지
- [X] 캐릭터의 부상 기능 추가
- [X] 캐릭터의 공격력이 몬스터의 방어력보다 작거나 같을 때 게임을 종료시키는 기능 추가
- [X] 게임 종료 분기에에 따라 다른 엔딩 로그 출력 기능 추가 

## 추가기능:

### 캐릭터의 부상 기능
**[ 설명 ]**
- 몬스터가 캐릭터를 공격해 데미지를 입힐 때마다 `10%의 확률`로 캐릭터에게 부상을 입힌다.
- 캐릭터가 부상을 입으면 `공격력이 2 감소`한다.

**[ 조건 ]**
- 몬스터가 캐릭터를 공격하더라도 데미지가 없으면 부상을 입히지 못한다.
- `Random함수`를 이용해 확률 기능을 사용한다.

### 캐릭터의 공격력이 몬스터의 방어력보다 작거나 같을 때 게임을 종료시키는 기능
**[ 설명 ]**

- `캐릭터의 부상 기능`으로부터 파생된 기능
- 게임의 `데미지 공식` : `{캐릭터의 공격력}` - `{몬스터의 방어력}`
- `데미지 공식`에 따라 캐릭터의 공격력이 몬스터의 방어력보다 작거나 같아지면 `절대 게임을 끝낼 수 없게` 되기 때문에 필요한 기능

**[ 조건 ]**
- 캐릭터의 공격력이 몬스터의 방어력보다 작아지는 기점을 체크하여 게임을 종료시킨다.

### 게임 종료 분기에 따라 다른 엔딩 로그 출력 기능 추가
**[ 설명 ]**
- `게임 승리`, `게임 패배`, `게임 중단`의 세 가지 분기에 따라 각각 다른 엔딩 로그를 출력한다.

**[ 조건 ]**
- `bool 타입`으로 게임 분기를 저장한다.

## 트러블슈팅:

#### 캐릭터 상태관리 방식 변경
- 문제점: 기존 Enum 사용 방식이 턴제로 구성된 게임 전체 플로우의 유동성을 따라가지 못함
- 해결책: 캐릭터 상태를 체크하는 메서드를 추가, 턴마다 호출
- 개선점: 코드 복잡성을 낮춰 확인이 용이해짐

#### 유저 입력으로 캐릭터 액션 결정하는 메서드 세분화
- 필요성: 한 메서드 내에서 유저 입력 처리와 그에 따른 액션 메서드 호출을 동시에 하면서 코드 가독성이 낮아짐, 메서드 이름만으로 역할 파악이 어려움  
- 해결책: 유저 입력을 처리하는 메서드와 유저 입력 결과에 따라 각각 다른 액션 메서드를 호출하는 메서드로 분리
- 개선점: 메서드명만으로 메서드 역할 파악 가능, 코드 확인과 수정이 용이해짐

#### 캐릭터, 몬스터 공격 메서드 내 데미지 조건 추가
- 문제점: 캐릭터나 몬스터가 공격할 때 상대의 잔여 체력보다 많은 데미지를 가할 수 있음
- 해결책: 데미지 조건을 추가해 데미지가 상대의 잔여 체력보다 클 수 없도록 함
- 개선점: 유저에게 더욱 합리적인 게임 경험을 제공함

#### 캐릭터, 몬스터 스탯에 따른 게임 종료 조건 추가
- 문제점: 게임 진행에 따라 캐릭터가 절대 게임을 종료할 수 없는 경우 - 캐릭터의 공격력이 몬스터의 방어력보다 작거나 같아지는 경우 - 가 발생함
- 해결책: 캐릭터의 공격력이 몬스터의 방어력보다 작거나 같아지는 경우를 새로운 게임 종료 조건 bool 타입으로 추가
- 개선점: 게임을 종료할 수 없는 무한 루프 상황을 방지함
- 트러블슈팅 포스트 링크: https://devlogmj.tistory.com/11

## 구현하며 배운 것:

클래스 간 역할을 구분하는 구조 설계를 연습함<br/>
메서드를 사용해 코드 재사용성을 높이는 구현을 고민함<br/>
텍스트 형식의 파일을 실행 중 읽어오고 변수화 하는 방법을 적용함<br/>
파일 임포트 중 발생할 수 있는 에러에 대비하여 강제 종료를 방지하는 코드를 작성함<br/>
코드 내 변수를 텍스트 파일화하는 방법을 학습함
